# superres

This repository provides a solution to enhance the resolution of the lipsynced video subframe generated by MuseTalk. It ensures the output subframe resolution matches the original frame resolution by leveraging super-resolution techniques such as **GFPGAN** or **CodeFormer**, applied only to the generated part.

---

## Problem Overview

MuseTalk generates a subframe within the video frame for lipsynced videos. However, this subframe often has a lower resolution than the original frame, leading to poor output quality. This solution automatically detects the resolution mismatch and enhances the subframe using super-resolution techniques.

---

## Features

- **Automatic Resolution Detection**: Compares the resolution of the input frame and output subframe.
- **Selective Enhancement**: Applies super-resolution only to the generated subframe to preserve computational efficiency.
- **Super-Resolution Techniques**: Supports **GFPGAN** for high-quality resolution enhancement.

---

## Installation

1. **Install Dependencies**: First, ensure that the required Python packages are installed by running the following command:

    ```bash
    pip install -r requirements.txt
    ```

2. **Sieve Login**: Make sure to sieve login to run the musetalk remotely and provide the API key as prompted.
     ```bash
     sieve login
     ```
   
4. **Download Pretrained Model**: Download the pretrained model for GFPGAN by running the following command:

    ```bash
    wget https://github.com/TencentARC/GFPGAN/releases/download/v0.2.0/GFPGANCleanv1-NoCE-C2.pth -P gfpgan_pretrained_models
    ```


---

## Usage

To enhance the resolution of a video, use the following command:

```bash
python x.py --superres GFPGAN -iv inputs/test.mp4 -ia inputs/test.mp3 -o results/output.mp4
```
